<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Server với Java: Giao tiếp thời gian thực</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
         
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #2563eb; }
        
         
        #lightbox-modal { transition: opacity 0.3s ease, visibility 0.3s ease; }
        #lightbox-modal.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        #lightbox-modal:not(.hidden) { opacity: 1; visibility: visible; pointer-events: auto; }
    </style>
</head>
<body class="bg-white text-slate-800 font-sans leading-relaxed relative">

    <nav class="fixed top-0 w-full bg-white/95 backdrop-blur-sm shadow-sm z-50 border-b border-slate-100">
        <div class="container mx-auto px-6 py-4 relative flex items-center justify-center">
            <a href="https://tuancuong2208.github.io/my-portfolio/" class="text-2xl font-bold text-blue-600 tracking-tighter absolute left-6 md:left-0">NTC<span class="text-slate-400">.Dev</span></a>
            
            <ul class="hidden md:flex space-x-10 font-medium text-[15px]">
                
                <li>
                    <a href="/my-portfolio/#home" class="text-slate-600 hover:text-blue-600 transition-colors py-2 relative group">
                        Trang Chủ
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 transition-all group-hover:w-full"></span>
                    </a>
                </li>
                
                <li>
                    <a href="/my-portfolio/#about" class="text-slate-600 hover:text-blue-600 transition-colors py-2 relative group">
                        Về Tôi
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 transition-all group-hover:w-full"></span>
                    </a>
                </li>
                
                <li>
                    <a href="/my-portfolio/#certificates" class="text-slate-600 hover:text-blue-600 transition-colors py-2 relative group">
                        Chứng Chỉ
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 transition-all group-hover:w-full"></span>
                    </a>
                </li>
                
                <li>
                    <a href="/my-portfolio/#blog" class="text-slate-600 hover:text-blue-600 transition-colors py-2 relative group">
                        Blog
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 transition-all group-hover:w-full"></span>
                    </a>
                </li>
                
            </ul>
        </div>
    </nav>

    <main>
        
<div class="pt-32 pb-20 bg-white">
    <article class="container mx-auto px-6 max-w-3xl">
        <header class="mb-10 text-center">
            <div class="text-blue-600 font-bold mb-3 text-sm uppercase tracking-widest">
                
            </div>
            <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 mb-6 leading-tight">WebSocket Server với Java: Giao tiếp thời gian thực</h1>
            <div class="flex justify-center items-center text-slate-500 text-sm gap-4">
                <span class="flex items-center"><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> 13/12/2024</span>
                <span class="flex items-center"><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> Tuấn Cường</span>
            </div>
        </header>
        
        <div class="prose prose-lg prose-slate mx-auto text-justify">
            <style>
                .content-area table { width: 100%; border-collapse: collapse; margin: 2rem 0; font-size: 0.95rem; }
                .content-area th { background-color: #eff6ff; color: #1e40af; font-weight: bold; text-align: left; padding: 12px; border: 1px solid #e2e8f0; }
                .content-area td { padding: 12px; border: 1px solid #e2e8f0; color: #475569; }
                .content-area tr:nth-child(even) { background-color: #f8fafc; }
                .content-area pre { background: #1e293b; color: #e2e8f0; padding: 1.5rem; border-radius: 0.75rem; overflow-x: auto; margin: 1.5rem 0; }
                .content-area code { color: #2563eb; font-weight: 600; background: #eff6ff; padding: 2px 6px; border-radius: 4px; font-size: 0.9em; }
                .content-area pre code { color: inherit; background: transparent; padding: 0; }
            </style>
            
            <div class="content-area">
                <h2 id="websocket-là-gì">WebSocket là gì?</h2>
<p>WebSocket là giao thức cung cấp kênh giao tiếp song công (full-duplex) qua một kết nối TCP duy nhất. Khác với HTTP truyền thống (request-response), WebSocket cho phép server chủ động gửi dữ liệu đến client.</p>
<h2 id="ứng-dụng-của-websocket">Ứng dụng của WebSocket</h2>
<ul>
<li>Chat applications</li>
<li>Real-time notifications</li>
<li>Live sports scores</li>
<li>Collaborative editing</li>
<li>Online gaming</li>
</ul>
<h2 id="xây-dựng-websocket-server-với-java-ee">Xây dựng WebSocket Server với Java EE</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.websocket.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.websocket.server.ServerEndpoint;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.IOException;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Set;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.CopyOnWriteArraySet;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@ServerEndpoint</span>(<span style="color:#e6db74">&#34;/chat&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ChatServer</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Set clients <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> CopyOnWriteArraySet<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@OnOpen</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onOpen</span>(Session session) {
</span></span><span style="display:flex;"><span>        clients.<span style="color:#a6e22e">add</span>(session);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Kết nối mới: &#34;</span> <span style="color:#f92672">+</span> session.<span style="color:#a6e22e">getId</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@OnMessage</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onMessage</span>(String message, Session session) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Nhận tin nhắn: &#34;</span> <span style="color:#f92672">+</span> message);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Broadcast đến tất cả clients</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (Session client : clients) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                client.<span style="color:#a6e22e">getBasicRemote</span>().<span style="color:#a6e22e">sendText</span>(message);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (IOException e) {
</span></span><span style="display:flex;"><span>                e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@OnClose</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onClose</span>(Session session) {
</span></span><span style="display:flex;"><span>        clients.<span style="color:#a6e22e">remove</span>(session);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Ngắt kết nối: &#34;</span> <span style="color:#f92672">+</span> session.<span style="color:#a6e22e">getId</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@OnError</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onError</span>(Session session, Throwable throwable) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Lỗi: &#34;</span> <span style="color:#f92672">+</span> throwable.<span style="color:#a6e22e">getMessage</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="websocket-với-spring-boot">WebSocket với Spring Boot</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.socket.TextMessage;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.socket.WebSocketSession;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.socket.handler.TextWebSocketHandler;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ChatWebSocketHandler</span> <span style="color:#66d9ef">extends</span> TextWebSocketHandler {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">handleTextMessage</span>(
</span></span><span style="display:flex;"><span>        WebSocketSession session, 
</span></span><span style="display:flex;"><span>        TextMessage message
</span></span><span style="display:flex;"><span>    ) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        String payload <span style="color:#f92672">=</span> message.<span style="color:#a6e22e">getPayload</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Nhận: &#34;</span> <span style="color:#f92672">+</span> payload);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        session.<span style="color:#a6e22e">sendMessage</span>(<span style="color:#66d9ef">new</span> TextMessage(<span style="color:#e6db74">&#34;Echo: &#34;</span> <span style="color:#f92672">+</span> payload));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="cấu-hình-websocket-trong-spring-boot">Cấu hình WebSocket trong Spring Boot</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.context.annotation.Configuration;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.socket.config.annotation.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@EnableWebSocket</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">WebSocketConfig</span> <span style="color:#66d9ef">implements</span> WebSocketConfigurer {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">registerWebSocketHandlers</span>(
</span></span><span style="display:flex;"><span>        WebSocketHandlerRegistry registry
</span></span><span style="display:flex;"><span>    ) {
</span></span><span style="display:flex;"><span>        registry.<span style="color:#a6e22e">addHandler</span>(<span style="color:#66d9ef">new</span> ChatWebSocketHandler(), <span style="color:#e6db74">&#34;/chat&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">setAllowedOrigins</span>(<span style="color:#e6db74">&#34;*&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="kết-luận">Kết luận</h2>
<p>WebSocket là công nghệ quan trọng cho các ứng dụng real-time. Java cung cấp nhiều cách để implement WebSocket, từ Java EE chuẩn đến Spring Framework.</p>

            </div>
        </div>

        <div class="mt-16 pt-10 border-t border-slate-100 text-center">
            <a href="https://tuancuong2208.github.io/my-portfolio/" class="inline-flex items-center px-8 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition shadow-lg shadow-blue-500/30">
                ← Quay lại trang chủ
            </a>
        </div>
    </article>
</div>

    </main>

    <footer class="bg-slate-50 py-8 border-t border-slate-200 mt-auto">
        <div class="container mx-auto px-6 text-center text-slate-500 text-sm">
            <p>© 2024 Nguyễn Tuấn Cường. All rights reserved.</p>
        </div>
    </footer>

    <div id="lightbox-modal" class="fixed inset-0 z-[100] bg-black/90 hidden flex items-center justify-center p-4 backdrop-blur-sm" onclick="closeLightbox()">
        <div class="relative max-w-6xl w-full h-full flex items-center justify-center">
             <img id="lightbox-image" src="" alt="Fullsize Image" class="max-h-[90vh] max-w-full object-contain rounded-lg shadow-2xl scale-95 transition-transform duration-300" onclick="event.stopPropagation()">
             <button onclick="closeLightbox()" class="absolute top-4 right-4 md:-top-10 md:-right-10 text-white/70 hover:text-white bg-black/50 hover:bg-black/80 rounded-full p-2 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
             </button>
        </div>
    </div>

    <script>
        const modal = document.getElementById('lightbox-modal');
        const img = document.getElementById('lightbox-image');

        function openLightbox(imageSrc) {
            img.src = imageSrc;
            modal.classList.remove('hidden');
            setTimeout(() => img.classList.remove('scale-95'), 10);
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            img.classList.add('scale-95');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
            setTimeout(() => img.src = '', 300);
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
                closeLightbox();
            }
        });
    </script>

</body>
</html>